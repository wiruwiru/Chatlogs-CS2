(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[612],{7202:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/search",function(){return r(6428)}])},710:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var a=r(4848),s=r(1106),n=r.n(s);function c(){return(0,a.jsx)("footer",{className:"py-6 text-center border-t border-border",children:(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:[(0,a.jsx)(n(),{href:"/",className:"hover:text-primary transition-colors",children:"ChatPanel"})," Copyright 2024 \xa9 | Design by ",(0,a.jsx)(n(),{href:"https://lucauy.dev",target:"_blank",rel:"nofollow",className:"hover:text-primary transition-colors",children:"Luca."})]})})}},8718:(e,t,r)=>{"use strict";r.d(t,{Eb:()=>u,Iu:()=>o,M_:()=>x,WA:()=>m,cU:()=>d,dK:()=>i,n$:()=>h});var a=r(4848),s=r(6540),n=r(9751),c=r(5126),l=r(7049);let i=e=>{let{className:t,...r}=e;return(0,a.jsx)("nav",{role:"navigation","aria-label":"pagination",className:(0,n.cn)("mx-auto flex w-full justify-center",t),...r})};i.displayName="Pagination";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("ul",{ref:t,className:(0,n.cn)("flex flex-row items-center gap-1",r),...s})});o.displayName="PaginationContent";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("li",{ref:t,className:(0,n.cn)("",r),...s})});d.displayName="PaginationItem";let h=e=>{let{className:t,isActive:r,size:s="icon",...l}=e;return(0,a.jsx)("a",{"aria-current":r?"page":void 0,className:(0,n.cn)((0,c.r)({variant:r?"outline":"ghost",size:s}),t),...l})};h.displayName="PaginationLink";let u=e=>{let{className:t,...r}=e;return(0,a.jsxs)(h,{"aria-label":"Go to previous page",size:"default",className:(0,n.cn)("gap-1 pl-2.5",t),...r,children:[(0,a.jsx)(l.YJP,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Previous"})]})};u.displayName="PaginationPrevious";let m=e=>{let{className:t,...r}=e;return(0,a.jsxs)(h,{"aria-label":"Go to next page",size:"default",className:(0,n.cn)("gap-1 pr-2.5",t),...r,children:[(0,a.jsx)("span",{children:"Next"}),(0,a.jsx)(l.vKP,{className:"h-4 w-4"})]})};m.displayName="PaginationNext";let x=e=>{let{className:t,...r}=e;return(0,a.jsxs)("span",{"aria-hidden":!0,className:(0,n.cn)("flex h-9 w-9 items-center justify-center",t),...r,children:[(0,a.jsx)(l.Oer,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"More pages"})]})};x.displayName="PaginationEllipsis"},4111:(e,t,r)=>{"use strict";r.d(t,{T:()=>c});var a=r(4848),s=r(6540),n=r(8718);function c(e){let{currentPage:t,totalPages:r,onPageChange:c,className:l}=e,i=!function(e){let[t,r]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{let a=window.matchMedia(e);a.matches!==t&&r(a.matches);let s=()=>r(a.matches);return a.addEventListener("change",s),()=>a.removeEventListener("change",s)},[t,e]),t}("(max-width: 640px)")?5:3;return(0,a.jsx)(n.dK,{className:l,children:(0,a.jsxs)(n.Iu,{className:"gap-1",children:[(0,a.jsx)(n.cU,{children:(0,a.jsx)(n.Eb,{onClick:()=>c(Math.max(1,t-1)),className:"h-8 bg-background text-foreground border-border hover:bg-accent hover:text-accent-foreground",disabled:1===t})}),(()=>{let e=[],s=Math.max(1,t-Math.floor(i/2)),l=Math.min(r,s+i-1);l-s+1<i&&(s=Math.max(1,l-i+1)),s>1&&(e.push((0,a.jsx)(n.cU,{children:(0,a.jsx)(n.n$,{onClick:()=>c(1),className:"bg-background text-foreground border-border hover:bg-accent hover:text-accent-foreground",children:"1"})},"start")),s>2&&e.push((0,a.jsx)(n.cU,{children:(0,a.jsx)(n.M_,{className:"bg-background text-foreground border-border"})},"start-ellipsis")));for(let r=s;r<=l;r++)e.push((0,a.jsx)(n.cU,{children:(0,a.jsx)(n.n$,{onClick:()=>c(r),isActive:t===r,className:t===r?"bg-accent text-accent-foreground border-border":"bg-background text-foreground border-border hover:bg-accent hover:text-accent-foreground",children:r})},r));return l<r&&(l<r-1&&e.push((0,a.jsx)(n.cU,{children:(0,a.jsx)(n.M_,{className:"bg-background text-foreground border-border"})},"end-ellipsis")),e.push((0,a.jsx)(n.cU,{children:(0,a.jsx)(n.n$,{onClick:()=>c(r),className:"bg-background text-foreground border-border hover:bg-accent hover:text-accent-foreground",children:r})},"end"))),e})(),(0,a.jsx)(n.cU,{children:(0,a.jsx)(n.WA,{onClick:()=>c(Math.min(r,t+1)),className:"h-8 bg-background text-foreground border-border hover:bg-accent hover:text-accent-foreground",disabled:t===r})})]})})}},6428:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>v});var a=r(4848),s=r(6540),n=r(6715),c=r(2955),l=r(2474),i=r(710),o=r(8714),d=r(9965),h=r.n(d),u=r(8435),m=r(172),x=r(8353),f=r(9893),g=r(5126),p=r(3150),j=r(2510),b=r(4111);function N(){let e=(0,n.useRouter)(),{page:t}=e.query,[r,l]=(0,s.useState)([]),[i,d]=(0,s.useState)(""),[N,v]=(0,s.useState)(t?parseInt(t):1),[w,y]=(0,s.useState)(1),[k,S]=(0,s.useState)(!1),[P,E]=(0,s.useState)({}),[_,C]=(0,s.useState)(!1),[A,I]=(0,s.useState)({}),[T,L]=(0,s.useState)(!1),[M,U]=(0,s.useState)(!1),{theme:R,setTheme:D}=(0,o.D)(),{toast:F}=(0,j.dj)(),G=async e=>{try{let t=await fetch("/api/steam/profiles?ids=".concat(e.join(",")));if(!t.ok)throw Error("Failed to fetch Steam profiles");let r=await t.json();E(e=>({...e,...r}))}catch(e){console.error("Error fetching Steam profiles:",e)}},$=async e=>{if(M)try{let t=[...new Set(e)],r=await fetch("/api/users/platforms?steamids=".concat(t.join(",")));if(r.ok){let e=await r.json();I(e)}}catch(e){console.error("Error fetching FACEIT IDs:",e)}},K=async e=>{S(!0),C(!1);try{let t=new URLSearchParams({page:e.toString(),searchTerm:i}),r=await fetch("/api/users/search?".concat(t));if(!r.ok){let e=await r.json();throw Error(e.error||"Failed to fetch users")}let a=await r.json();l(a.items),y(a.totalPages),C(0===a.items.length);let s=[...new Set(a.items.map(e=>e.steamid64))];s.length>0&&await Promise.all([G(s),$(s)])}catch(e){console.error("Error fetching users:",e),C(!0)}finally{S(!1)}};(0,s.useEffect)(()=>{t&&v(parseInt(t))},[t]),(0,s.useEffect)(()=>{(async()=>{let e=await fetch("/api/check-faceit-api"),{enabled:t}=await e.json();U(t)})()},[]);let O=e=>e?new Date(e).toLocaleString():"N/A",W=e=>{let{href:t,src:r,alt:s,onClick:n}=e;return(0,a.jsx)("div",{className:"inline-flex items-center justify-center w-8 h-8",children:t?(0,a.jsx)("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"text-foreground hover:text-primary transition-colors justify-center",children:(0,a.jsx)(h(),{src:r,alt:s,width:24,height:24,style:{filter:"invert(".concat("dark"===R?1:0,")")}})}):(0,a.jsx)("button",{onClick:n,className:"text-foreground hover:text-primary transition-colors ",children:(0,a.jsx)(h(),{src:r,alt:s,width:24,height:24,style:{filter:"invert(".concat("dark"===R?1:0,")")}})})})};return(0,a.jsx)(p.tE,{children:(0,a.jsxs)(m.Zp,{className:"max-w-6xl mx-auto",children:[(0,a.jsx)(m.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:(0,a.jsx)(m.ZB,{className:"text-2xl font-bold",children:"Player Search"})}),(0,a.jsxs)(m.Wu,{children:[(0,a.jsxs)("div",{className:"flex space-x-2 mb-4",children:[(0,a.jsx)(u.p,{placeholder:"Search by SteamID64, Name or IP",value:i,onChange:e=>d(e.target.value),className:"flex-grow"}),(0,a.jsxs)(g.$,{onClick:()=>{v(1),K(1),L(!0)},children:[(0,a.jsx)(f.A,{className:"h-4 w-4 mr-2"}),"Search"]})]}),k?(0,a.jsx)("div",{className:"flex justify-center items-center py-8",children:(0,a.jsx)(c.A,{className:"h-8 w-8 animate-spin"})}):(0,a.jsxs)(a.Fragment,{children:[!T&&(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsx)("p",{children:"Perform a search to see results."})}),T&&_&&(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsx)("p",{children:"No results found. Try a different search method."})}),T&&!_&&0===r.length&&(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsx)("p",{children:"There was an error retrieving the results. Please try again in a few minutes."})}),(0,a.jsx)("div",{className:"space-y-4",children:r.map((e,t)=>{var r,s;return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4 mb-2",children:[(0,a.jsxs)(x.eu,{className:"h-12 w-12",children:[(0,a.jsx)(x.BK,{src:null===(r=P[e.steamid64])||void 0===r?void 0:r.avatarUrl,alt:e.name}),(0,a.jsx)(x.q5,{children:e.name.slice(0,2)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold",children:(null===(s=P[e.steamid64])||void 0===s?void 0:s.displayName)||e.name}),(0,a.jsxs)("div",{className:"flex text-center items-center justify-between space-x-2",children:[(0,a.jsxs)("p",{className:"text-sm text-muted-foreground ",children:["ID64: ",e.steamid64]}),(0,a.jsx)(W,{href:"https://steamcommunity.com/profiles/".concat(e.steamid64),target:"_blank",rel:"noopener noreferrer",src:"/icons/steam.svg",alt:"steam-logo"}),(0,a.jsx)(W,{href:"https://csstats.gg/es/player/".concat(e.steamid64),target:"_blank",rel:"noopener noreferrer",src:"/icons/csstats.svg",alt:"csstats-logo"}),(0,a.jsx)(W,{href:"https://gamersclub.com.br/buscar?busca=https://steamcommunity.com/profiles/".concat(e.steamid64),src:"/icons/gamersclub.png",alt:"gamersclub-logo"}),M&&(0,a.jsx)(W,{href:A[e.steamid64]?"https://www.faceit.com/en/players/".concat(A[e.steamid64]):null,src:"/icons/faceit.svg",alt:"faceit-logo",onClick:()=>{A[e.steamid64]||F({variant:"destructive",title:"An error occurred",description:"Unable to find the FACEIT profile for this user."})}})]})]})]}),e.cs2_ip&&(0,a.jsxs)("div",{className:"bg-secondary rounded-lg p-4",children:[(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["IP: ",e.cs2_ip]}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Last seen: ",O(e.cs2_last_seen)]})]})]},"".concat(e.steamid64,"-").concat(t))})})]}),(0,a.jsx)(b.T,{currentPage:N,totalPages:w,onPageChange:t=>{v(t),e.push("/search?page=".concat(t),void 0,{shallow:!0}),window.scrollTo(0,0)},className:"mt-6"})]})]})})}function v(){let e=(0,n.useRouter)(),[t,r]=(0,s.useState)(!0),[o,d]=(0,s.useState)(!1);return((0,s.useEffect)(()=>{(async function(){try{let t=await fetch("/api/auth/session");(await t.json()).user?d(!0):e.push("/login")}catch(t){console.error("Error fetching user:",t),e.push("/login")}finally{r(!1)}})()},[e]),t)?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-background",children:(0,a.jsx)(c.A,{className:"h-8 w-8 animate-spin text-primary"})}):o?(0,a.jsxs)("div",{className:"min-h-screen bg-background text-foreground flex flex-col",children:[(0,a.jsx)(l.A,{}),(0,a.jsx)("main",{className:"flex-1 container mx-auto px-4 py-8",children:(0,a.jsx)(N,{})}),(0,a.jsx)(i.A,{})]}):null}},5847:(e,t,r)=>{"use strict";r.d(t,{H4:()=>v,_V:()=>N,bL:()=>b});var a=r(6540),s=r(2133),n=r(263),c=r(8200),l=r(2579),i=r(4848),o="Avatar",[d,h]=(0,s.A)(o),[u,m]=d(o),x=a.forwardRef((e,t)=>{let{__scopeAvatar:r,...s}=e,[n,c]=a.useState("idle");return(0,i.jsx)(u,{scope:r,imageLoadingStatus:n,onImageLoadingStatusChange:c,children:(0,i.jsx)(l.sG.span,{...s,ref:t})})});x.displayName=o;var f="AvatarImage",g=a.forwardRef((e,t)=>{let{__scopeAvatar:r,src:s,onLoadingStatusChange:o=()=>{},...d}=e,h=m(f,r),u=function(e,t){let[r,s]=a.useState("idle");return(0,c.N)(()=>{if(!e){s("error");return}let r=!0,a=new window.Image,n=e=>()=>{r&&s(e)};return s("loading"),a.onload=n("loaded"),a.onerror=n("error"),a.src=e,t&&(a.referrerPolicy=t),()=>{r=!1}},[e,t]),r}(s,d.referrerPolicy),x=(0,n.c)(e=>{o(e),h.onImageLoadingStatusChange(e)});return(0,c.N)(()=>{"idle"!==u&&x(u)},[u,x]),"loaded"===u?(0,i.jsx)(l.sG.img,{...d,ref:t,src:s}):null});g.displayName=f;var p="AvatarFallback",j=a.forwardRef((e,t)=>{let{__scopeAvatar:r,delayMs:s,...n}=e,c=m(p,r),[o,d]=a.useState(void 0===s);return a.useEffect(()=>{if(void 0!==s){let e=window.setTimeout(()=>d(!0),s);return()=>window.clearTimeout(e)}},[s]),o&&"loaded"!==c.imageLoadingStatus?(0,i.jsx)(l.sG.span,{...n,ref:t}):null});j.displayName=p;var b=x,N=g,v=j}},e=>{var t=t=>e(e.s=t);e.O(0,[111,890,636,593,792],()=>t(7202)),_N_E=e.O()}]);