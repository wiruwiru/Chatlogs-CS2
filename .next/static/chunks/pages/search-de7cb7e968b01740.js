(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[612],{7202:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/search",function(){return s(6428)}])},710:(e,t,s)=>{"use strict";s.d(t,{A:()=>c});var r=s(4848),a=s(1106),n=s.n(a);function c(){return(0,r.jsx)("footer",{className:"py-6 text-center border-t border-border",children:(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:[(0,r.jsx)(n(),{href:"/",className:"hover:text-primary transition-colors",children:"ChatPanel"})," Copyright 2024 \xa9 | Design by ",(0,r.jsx)(n(),{href:"https://lucauy.dev",target:"_blank",rel:"nofollow",className:"hover:text-primary transition-colors",children:"Luca."})]})})}},8718:(e,t,s)=>{"use strict";s.d(t,{Eb:()=>u,Iu:()=>o,M_:()=>x,WA:()=>m,cU:()=>d,dK:()=>i,n$:()=>h});var r=s(4848),a=s(6540),n=s(9751),c=s(5126),l=s(7049);let i=e=>{let{className:t,...s}=e;return(0,r.jsx)("nav",{role:"navigation","aria-label":"pagination",className:(0,n.cn)("mx-auto flex w-full justify-center",t),...s})};i.displayName="Pagination";let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("ul",{ref:t,className:(0,n.cn)("flex flex-row items-center gap-1",s),...a})});o.displayName="PaginationContent";let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("li",{ref:t,className:(0,n.cn)("",s),...a})});d.displayName="PaginationItem";let h=e=>{let{className:t,isActive:s,size:a="icon",...l}=e;return(0,r.jsx)("a",{"aria-current":s?"page":void 0,className:(0,n.cn)((0,c.r)({variant:s?"outline":"ghost",size:a}),t),...l})};h.displayName="PaginationLink";let u=e=>{let{className:t,...s}=e;return(0,r.jsxs)(h,{"aria-label":"Go to previous page",size:"default",className:(0,n.cn)("gap-1 pl-2.5",t),...s,children:[(0,r.jsx)(l.YJP,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:"Previous"})]})};u.displayName="PaginationPrevious";let m=e=>{let{className:t,...s}=e;return(0,r.jsxs)(h,{"aria-label":"Go to next page",size:"default",className:(0,n.cn)("gap-1 pr-2.5",t),...s,children:[(0,r.jsx)("span",{children:"Next"}),(0,r.jsx)(l.vKP,{className:"h-4 w-4"})]})};m.displayName="PaginationNext";let x=e=>{let{className:t,...s}=e;return(0,r.jsxs)("span",{"aria-hidden":!0,className:(0,n.cn)("flex h-9 w-9 items-center justify-center",t),...s,children:[(0,r.jsx)(l.Oer,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"More pages"})]})};x.displayName="PaginationEllipsis"},4111:(e,t,s)=>{"use strict";s.d(t,{T:()=>c});var r=s(4848),a=s(6540),n=s(8718);function c(e){let{currentPage:t,totalPages:s,onPageChange:c,className:l}=e,i=!function(e){let[t,s]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{let r=window.matchMedia(e);r.matches!==t&&s(r.matches);let a=()=>s(r.matches);return r.addEventListener("change",a),()=>r.removeEventListener("change",a)},[t,e]),t}("(max-width: 640px)")?5:3;return(0,r.jsx)(n.dK,{className:l,children:(0,r.jsxs)(n.Iu,{className:"gap-1",children:[(0,r.jsx)(n.cU,{children:(0,r.jsx)(n.Eb,{onClick:()=>c(Math.max(1,t-1)),className:"h-8 bg-background text-foreground border-border hover:bg-accent hover:text-accent-foreground",disabled:1===t})}),(()=>{let e=[],a=Math.max(1,t-Math.floor(i/2)),l=Math.min(s,a+i-1);l-a+1<i&&(a=Math.max(1,l-i+1)),a>1&&(e.push((0,r.jsx)(n.cU,{children:(0,r.jsx)(n.n$,{onClick:()=>c(1),className:"bg-background text-foreground border-border hover:bg-accent hover:text-accent-foreground",children:"1"})},"start")),a>2&&e.push((0,r.jsx)(n.cU,{children:(0,r.jsx)(n.M_,{className:"bg-background text-foreground border-border"})},"start-ellipsis")));for(let s=a;s<=l;s++)e.push((0,r.jsx)(n.cU,{children:(0,r.jsx)(n.n$,{onClick:()=>c(s),isActive:t===s,className:t===s?"bg-accent text-accent-foreground border-border":"bg-background text-foreground border-border hover:bg-accent hover:text-accent-foreground",children:s})},s));return l<s&&(l<s-1&&e.push((0,r.jsx)(n.cU,{children:(0,r.jsx)(n.M_,{className:"bg-background text-foreground border-border"})},"end-ellipsis")),e.push((0,r.jsx)(n.cU,{children:(0,r.jsx)(n.n$,{onClick:()=>c(s),className:"bg-background text-foreground border-border hover:bg-accent hover:text-accent-foreground",children:s})},"end"))),e})(),(0,r.jsx)(n.cU,{children:(0,r.jsx)(n.WA,{onClick:()=>c(Math.min(s,t+1)),className:"h-8 bg-background text-foreground border-border hover:bg-accent hover:text-accent-foreground",disabled:t===s})})]})})}},6428:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>w});var r=s(4848),a=s(6540),n=s(6715),c=s(2955),l=s(2474),i=s(710),o=s(8714),d=s(9965),h=s.n(d),u=s(8435),m=s(172),x=s(8353),f=s(9893),g=s(1208),p=s(5126),j=s(3150),N=s(2510),b=s(4111);function v(){let e=(0,n.useRouter)(),{page:t}=e.query,[s,l]=(0,a.useState)([]),[i,d]=(0,a.useState)(""),[v,w]=(0,a.useState)(t?parseInt(t):1),[y,k]=(0,a.useState)(1),[S,P]=(0,a.useState)(!1),[E,_]=(0,a.useState)({}),[C,A]=(0,a.useState)(!1),[I,T]=(0,a.useState)({}),[L,M]=(0,a.useState)(!1),[U,R]=(0,a.useState)(!1),{theme:D,setTheme:F}=(0,o.D)(),{toast:G}=(0,N.dj)(),$=async e=>{try{let t=await fetch("/api/steam/profiles?ids=".concat(e.join(",")));if(!t.ok)throw Error("Failed to fetch Steam profiles");let s=await t.json();_(e=>({...e,...s}))}catch(e){console.error("Error fetching Steam profiles:",e)}},z=async e=>{if(U)try{let t=[...new Set(e)],s=await fetch("/api/users/platforms?steamids=".concat(t.join(",")));if(s.ok){let e=await s.json();T(e)}}catch(e){console.error("Error fetching FACEIT IDs:",e)}},K=async e=>{P(!0),A(!1);try{let t=new URLSearchParams({page:e.toString(),searchTerm:i}),s=await fetch("/api/users/search?".concat(t));if(!s.ok){let e=await s.json();throw Error(e.error||"Failed to fetch users")}let r=await s.json();l(r.items),k(r.totalPages),A(0===r.items.length);let a=[...new Set(r.items.map(e=>e.steamid64))];a.length>0&&await Promise.all([$(a),z(a)])}catch(e){console.error("Error fetching users:",e),A(!0)}finally{P(!1)}};(0,a.useEffect)(()=>{t&&w(parseInt(t))},[t]),(0,a.useEffect)(()=>{(async()=>{let e=await fetch("/api/check-faceit-api"),{enabled:t}=await e.json();R(t)})()},[]);let O=e=>e?new Date(e).toLocaleString():"N/A",W=e=>{let{href:t,src:s,alt:a,onClick:n,icon:c}=e;return(0,r.jsx)("div",{className:"inline-flex items-center justify-center w-8 h-8",children:t?(0,r.jsx)("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"text-foreground hover:text-primary transition-colors justify-center",children:c?(0,r.jsx)(c,{size:24}):(0,r.jsx)(h(),{src:s,alt:a,width:24,height:24,style:{filter:"invert(".concat("dark"===D?1:0,")")}})}):(0,r.jsx)("button",{onClick:n,className:"text-foreground hover:text-primary transition-colors ",children:c?(0,r.jsx)(c,{size:24}):(0,r.jsx)(h(),{src:s,alt:a,width:24,height:24,style:{filter:"invert(".concat("dark"===D?1:0,")")}})})})};return(0,r.jsx)(j.tE,{children:(0,r.jsxs)(m.Zp,{className:"max-w-6xl mx-auto",children:[(0,r.jsx)(m.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:(0,r.jsx)(m.ZB,{className:"text-2xl font-bold",children:"Player Search"})}),(0,r.jsxs)(m.Wu,{children:[(0,r.jsxs)("div",{className:"flex space-x-2 mb-4",children:[(0,r.jsx)(u.p,{placeholder:"Search by SteamID64, Name or IP",value:i,onChange:e=>d(e.target.value),className:"flex-grow"}),(0,r.jsxs)(p.$,{onClick:()=>{w(1),K(1),M(!0)},children:[(0,r.jsx)(f.A,{className:"h-4 w-4 mr-2"}),"Search"]})]}),S?(0,r.jsx)("div",{className:"flex justify-center items-center py-8",children:(0,r.jsx)(c.A,{className:"h-8 w-8 animate-spin"})}):(0,r.jsxs)(r.Fragment,{children:[!L&&(0,r.jsx)("div",{className:"text-center py-8",children:(0,r.jsx)("p",{children:"Perform a search to see results."})}),L&&C&&(0,r.jsx)("div",{className:"text-center py-8",children:(0,r.jsx)("p",{children:"No results found. Try a different search method."})}),L&&!C&&0===s.length&&(0,r.jsx)("div",{className:"text-center py-8",children:(0,r.jsx)("p",{children:"There was an error retrieving the results. Please try again in a few minutes."})}),(0,r.jsx)("div",{className:"space-y-4",children:s.map((e,t)=>{var s,a;return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4 mb-2",children:[(0,r.jsxs)(x.eu,{className:"h-12 w-12",children:[(0,r.jsx)(x.BK,{src:null===(s=E[e.steamid64])||void 0===s?void 0:s.avatarUrl,alt:e.name}),(0,r.jsx)(x.q5,{children:e.name.slice(0,2)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-semibold",children:(null===(a=E[e.steamid64])||void 0===a?void 0:a.displayName)||e.name}),(0,r.jsxs)("div",{className:"flex text-center items-center justify-between space-x-2",children:[(0,r.jsxs)("p",{className:"text-sm text-muted-foreground ",children:["ID64: ",e.steamid64]}),(0,r.jsx)(W,{href:"https://steamcommunity.com/profiles/".concat(e.steamid64),target:"_blank",rel:"noopener noreferrer",src:"/icons/steam.svg",alt:"steam-logo"}),(0,r.jsx)(W,{href:"/chatlog/".concat(e.steamid64),icon:g.A,alt:"chatlog-icon"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"text-sm text-muted-foreground",children:"|"}),(0,r.jsx)(W,{href:"https://csstats.gg/es/player/".concat(e.steamid64),target:"_blank",rel:"noopener noreferrer",src:"/icons/csstats.svg",alt:"csstats-logo"}),(0,r.jsx)(W,{href:"https://gamersclub.com.br/buscar?busca=https://steamcommunity.com/profiles/".concat(e.steamid64),src:"/icons/gamersclub.png",alt:"gamersclub-logo"}),U&&(0,r.jsx)(W,{href:I[e.steamid64]?"https://www.faceit.com/en/players/".concat(I[e.steamid64]):null,src:"/icons/faceit.svg",alt:"faceit-logo",onClick:()=>{I[e.steamid64]||G({variant:"destructive",title:"An error occurred",description:"Unable to find the FACEIT profile for this user."})}})]})]})]})]}),e.cs2_ip&&(0,r.jsxs)("div",{className:"bg-secondary rounded-lg p-4",children:[(0,r.jsxs)("p",{className:"text-sm text-muted-foreground",children:["IP: ",e.cs2_ip]}),(0,r.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Last seen: ",O(e.cs2_last_seen)]})]})]},"".concat(e.steamid64,"-").concat(t))})})]}),(0,r.jsx)(b.T,{currentPage:v,totalPages:y,onPageChange:t=>{w(t),e.push("/search?page=".concat(t),void 0,{shallow:!0}),window.scrollTo(0,0)},className:"mt-6"})]})]})})}function w(){let e=(0,n.useRouter)(),[t,s]=(0,a.useState)(!0),[o,d]=(0,a.useState)(!1);return((0,a.useEffect)(()=>{(async function(){try{let t=await fetch("/api/auth/session");(await t.json()).user?d(!0):e.push("/login")}catch(t){console.error("Error fetching user:",t),e.push("/login")}finally{s(!1)}})()},[e]),t)?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-background",children:(0,r.jsx)(c.A,{className:"h-8 w-8 animate-spin text-primary"})}):o?(0,r.jsxs)("div",{className:"min-h-screen bg-background text-foreground flex flex-col",children:[(0,r.jsx)(l.A,{}),(0,r.jsx)("main",{className:"flex-1 container mx-auto px-4 py-8",children:(0,r.jsx)(v,{})}),(0,r.jsx)(i.A,{})]}):null}},5847:(e,t,s)=>{"use strict";s.d(t,{H4:()=>v,_V:()=>b,bL:()=>N});var r=s(6540),a=s(2133),n=s(263),c=s(8200),l=s(2579),i=s(4848),o="Avatar",[d,h]=(0,a.A)(o),[u,m]=d(o),x=r.forwardRef((e,t)=>{let{__scopeAvatar:s,...a}=e,[n,c]=r.useState("idle");return(0,i.jsx)(u,{scope:s,imageLoadingStatus:n,onImageLoadingStatusChange:c,children:(0,i.jsx)(l.sG.span,{...a,ref:t})})});x.displayName=o;var f="AvatarImage",g=r.forwardRef((e,t)=>{let{__scopeAvatar:s,src:a,onLoadingStatusChange:o=()=>{},...d}=e,h=m(f,s),u=function(e,t){let[s,a]=r.useState("idle");return(0,c.N)(()=>{if(!e){a("error");return}let s=!0,r=new window.Image,n=e=>()=>{s&&a(e)};return a("loading"),r.onload=n("loaded"),r.onerror=n("error"),r.src=e,t&&(r.referrerPolicy=t),()=>{s=!1}},[e,t]),s}(a,d.referrerPolicy),x=(0,n.c)(e=>{o(e),h.onImageLoadingStatusChange(e)});return(0,c.N)(()=>{"idle"!==u&&x(u)},[u,x]),"loaded"===u?(0,i.jsx)(l.sG.img,{...d,ref:t,src:a}):null});g.displayName=f;var p="AvatarFallback",j=r.forwardRef((e,t)=>{let{__scopeAvatar:s,delayMs:a,...n}=e,c=m(p,s),[o,d]=r.useState(void 0===a);return r.useEffect(()=>{if(void 0!==a){let e=window.setTimeout(()=>d(!0),a);return()=>window.clearTimeout(e)}},[a]),o&&"loaded"!==c.imageLoadingStatus?(0,i.jsx)(l.sG.span,{...n,ref:t}):null});j.displayName=p;var N=x,b=g,v=j}},e=>{var t=t=>e(e.s=t);e.O(0,[111,890,636,593,792],()=>t(7202)),_N_E=e.O()}]);